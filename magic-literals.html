<!DOCTYPE html>
<html><!-- InstanceBegin template="/Templates/as2-doc.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta charset="utf-8">
<link href="as2-doc.css" rel="stylesheet" type="text/css">
<script src="jquery.min.js" type="text/javascript"></script>
<script src="as2-doc.js" type="text/javascript"></script>
<!-- InstanceBeginEditable name="head" -->
<title>Magic Literals</title>
<style type="text/css">
	.layers-table thead, .layers-table td {
		text-align: center;
	}
	.layers-table th {
		width: 2em;
	}
</style>
<!-- InstanceEndEditable -->
</head>
<body>
<h1 id="about">About</h1>
<address>Author: <a href="index.html#contact">DeathByNukes</a></address>
<p>This is a part of my <a href="index.html">Audiosurf 2 scripting documentation</a>.</p>
<!-- InstanceBeginEditable name="pre-content" --><!-- InstanceEndEditable -->
<h1 id="contents">Contents</h1>
<script type="text/javascript">writeNavigation();</script>
<!-- InstanceBeginEditable name="content" -->
<h1 id="overview">Overview</h1>
<p>This is a list of various &quot;special&quot; values that can be used in some of the Lua API functions.</p>
<ul class="seealso">
	<li><a href="https://en.wikipedia.org/wiki/Magic_number_(programming)">Magic number (programming)</a></li>
	<li><a href="https://en.wikipedia.org/wiki/Literal_(computer_programming)">Literal (computer programming)</a></li>
</ul>
<h1 id="layers">Layers</h1>
<p>Layers determine which camera an object will be rendered on, and can also sometimes be given other special functions.</p>
<p>According to Dylan there are 3 cameras: background, foreground, and close. They are drawn to the framebuffer in that order, and the <a href="https://en.wikipedia.org/wiki/Z-buffering">depth buffer</a> is cleared before the next one, so objects on the later cameras will always cover up objects on the previous camera no matter where they are in the world. If you have the <a href="skins.html#SetScene">standard glow effect</a> enabled, all objects drawn to the background camera will be part of the glow effect.</p>
<p>This list is probably incomplete because I'm unable to extract the layer definitions from the game files. You can see Dylan's official documentation <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=413812198#583986">here</a> (&quot;Advanced Editing&quot; section, &quot;Rendering Layers&quot; subsection). I have included the <a href="https://docs.unity3d.com/2017.3/Documentation/Manual/Layers.html">Unity &quot;Builtin&quot; layers</a> in the list as well though I don't know if they are used.</p>
<ul class="seealso">
	<li><a href="glossary.html#layer">layer</a></li>
	<li><a href="glossary.html#render-queue">render queue</a></li>
	<li><a href="glossary.html#framebuffer">framebuffer</a></li>
	<li><a href="https://docs.unity3d.com/2017.3/Documentation/Manual/Layers.html">Layers</a></li>
	<li><a href="https://docs.unity3d.com/2017.3/Documentation/Manual/class-Camera.html">Camera</a></li>
</ul>
<dl>
	<dt id="layer-0"><dfn>0</dfn> <em>Builtin Layer: Default</em></dt>
	<dt id="layer-1"><dfn>1</dfn> <em>Builtin Layer: TransparentFX</em></dt>
	<dt id="layer-2"><dfn>2</dfn> <em>Builtin Layer: Ignore Raycast</em></dt>
	<dt id="layer-3"><dfn>3</dfn> <em>Builtin Layer</em></dt>
	<dt id="layer-4"><dfn>4</dfn> <em>Builtin Layer: Water</em></dt>
	<dt id="layer-5"><dfn>5</dfn> <em>Builtin Layer: UI</em></dt>
	<dt id="layer-6"><dfn>6</dfn> <em>Builtin Layer</em></dt>
	<dt id="layer-7"><dfn>7</dfn> <em>Builtin Layer</em></dt>
	<dt id="layer-11"><dfn>11</dfn> <em>Default (BG+FG)</em></dt>
	<dd>
		The default layer for Lua scripts.
		<br>According to Dylan: &quot;Renders the material to the background, and also in the foreground. Rendering foreground objects to the background can be useful for getting a glow halo that doesn't obscure gameplay.&quot;
	</dd>
	<dt id="layer-12"><dfn>12</dfn> <em>No Lights (BG+FG)</em></dt>
	<dd>Dylan: &quot;Same as 11, but lights are ignored&quot;</dd>
	<dt id="layer-13"><dfn>13</dfn> <em>Foreground (FG)</em></dt>
	<dd>
		Foreground.
		<br>The foreground layer. Objects in this layer &quot;won't be part of the glow effect&quot;.
		<br>Observed uses:
		<ul>
			<li>
				neon skin
				<ul>
					<li><code><a href="skins.html#SetWake" class="func">SetWake</a>{<strong>layer</strong> = 13} <em>-- looks better not rendered in background when water surface is not type 2</em></code></li>
					<li>skywires when the background camera is disabled</li>
					<li>transparent glass portion of track edge rails</li>
					<li>aurora</li>
				</ul>
			</li>
			<li>
				sandstorm skin
				<ul>
					<li>cliff</li>
					<li>aurora</li>
				</ul>
			</li>
			<li><a href="#SetSkybox">skysphere</a> if <code><a href="skins.html#GetQualityLevel" class="func">GetQualityLevel()</a> &lt;= 1</code></li>
			<li>water</li>
			<li>&quot;block stash&quot;</li>
		</ul>
	</dd>
	<dt id="layer-14"><dfn>14</dfn> <em>Close (C)</em></dt>
	<dd>The close camera layer. This is for important gameplay objects that are close to the camera like the player model. Objects in this layer will always cover up objects drawn in the background and foreground cameras and the close camera appears to have a much smaller <a href="glossary.html#culling-plane">far culling plane</a> but that can be altered with <code><a href="skins.html#SetScene" class="func">SetScene</a>{closecam_near,closecam_far}</code>.</dd>
	<dd>
		Observed uses:
		<ul>
			<li>classic skin vehicles</li>
			<li>the first 5 <a href="#SetPlayer">towrope</a> spheres in first person mode. (the rest of the spheres are on layer 13)</li>
		</ul>
	</dd>
	<dt id="layer-15"><dfn>15</dfn> <em>All (BG+FG+C)</em></dt>
	<dd>Renders on all 3 main cameras: Background, then Foreground, then Close.</dd>
	<dt id="layer-18"><dfn>18</dfn> <em>Background (BG)</em></dt>
	<dd>
		Draws only on the background camera AKA the &quot;glow camera&quot;. Dylan says this camera is disabled in <a href="#GetQualityLevel">quality levels</a> less than 3.
		<br>Used for skywires: <code><a href="skins.html#CreateObject" class="func">CreateObject</a>{<a href="skins.html#type-gameobject">gameobject</a>={layer=ifhifi(18,13)}} <em>-- in low detail the glow camera (layer 18) is disabled, so move the skywires to the main camera's layer (13)</em></code>
		<br> Use <code><a href="skins.html#SetScene" class="func">SetScene</a>{hide_default_background_verticals}</code> to get rid of the colored pillars that draw next to the track over objects in this layer.
	</dd>
	<dt id="layer-19"><dfn>19</dfn> <em>??? (BG)</em></dt>
	<dd>Dylan's documentation mentions this layer but gives it the exact same description as layer 18. I have not investigated it.</dd>
	<dt id="layer-27"><dfn>27</dfn> <em>Post (P)</em></dt>
	<dd>According to Dylan: &quot;renders after eveything else (even close foreground). can be used for post-effects&quot;</dd>
	<dt id="layer-31"><dfn>31</dfn> <em>??? (?)</em></dt>
	<dd>The pause screen uses this layer.</dd>
</dl>
<h2 id="layer-table">Layers Table</h2>
<table class="layers-table">
	<thead>
		<tr><th class="wide">Camera</th><th>11</th><th>12</th><th>13</th><th>14</th><th>15</th><th>18</th><th>19</th><th>27</th><th>31</th></tr>
	</thead>
	<tbody>
		<tr><th class="wide">Background</th><td>O</td><td>O</td><td>&nbsp;</td><td>&nbsp;</td><td>O</td><td>O</td><td>O</td><td>&nbsp;</td><td>&nbsp;</td></tr>
		<tr><th class="wide">Foreground</th><td>O</td><td>O</td><td>O</td><td>&nbsp;</td><td>O</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
		<tr><th class="wide">Close</th><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>O</td><td>O</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>?</td></tr>
		<tr><th class="wide">Post</th><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>O</td><td>?</td></tr>
	</tbody>
</table>
<h1 id="render-queue">Render Queue</h1>
<ul class="seealso">
	<li><a href="glossary.html#render-queue">render queue</a></li>
</ul>
<ol>
	<li value="1000"><strong>Background</strong>, skywires (neon, sandstorm, classic)</li>
	<li value="2000"><strong>Geometry (solid objects)</strong></li>
	<li value="2001">Stars</li>
	<li value="2002">Cirrus clouds</li>
	<li value="2450"><strong>AlphaTest</strong></li>
	<li value="2997">Water (The front water chunk gets 2997 and other chunks are lower numbers, in order. By default (see <code><a href="skins.html#SetScene" class="func">numvisiblewaterchunks</a></code>) there are up to 8 chunks.)</li>
	<li value="3000"><strong>Transparent</strong></li>
	<li value="3099"><a href="skins.html#SetRings">Rings</a></li>
	<li value="3376"><a href="skins.html#SetBlockFlashes">Block flashes</a></li>
	<li value="3899"><a href="skins.html#SetScene">Air debris</a></li>
	<li value="3998"><a href="skins.html#SetWake">Water wakes</a></li>
	<li value="3999">Surfboard (neon, sandstorm, classic), Vehicle thrusters (classic)</li>
	<li value="4000"><strong>Overlay</strong></li>
</ol>
<h1 id="special-textures">Special Textures</h1>
<ul class="seealso">
	<li><a href="glossary.html#texture">texture</a></li>
</ul>
<p>The texture loading is hidden behind some multithreading code that's hard to read so I'm just going to repeat <a href="http://www.audio-surf.com/forum/index.php/topic,13163.msg93835.html#msg93835">Dylan's announcement</a>.</p>
<p>You can set any texture to one of these special values:</p>
<ul>
	<li><code>&quot;&lt;ALBUMART&gt;&quot;</code></li>
	<li><code>&quot;&lt;ALBUMART_DOUBLEWIDTH&gt;&quot;</code></li>
	<li><code>&quot;&lt;ALBUMART_DOUBLEWIDTHMIRRORED&gt;&quot;</code> (handy for a wrapping skysphere)</li>
</ul>
<p>The logo is used if a song with no art is selected. You can also append &quot;GREY&quot; in any of the 3 to convert the art to greyscale. For example: <code>&quot;&lt;ALBUMART_DOUBLEWIDTHMIRRORED_GREY&gt;&quot;</code></p>
<!-- Add blank space so any definition can be scrolled to the top. -->
<div style="height: 100vh; display: inline-block;"></div>
<!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd --></html>