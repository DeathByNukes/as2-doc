<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>vector</title>
<link href="../as2-doc.css" rel="stylesheet" type="text/css">
<script src="../jquery.min.js" type="text/javascript"></script>
<script src="../as2-doc.js" type="text/javascript"></script>
</head>
<body>
<h1 id="about">About</h1>
<address>Author: <a href="index.html#contact">DeathByNukes</a></address>
<p>This is a part of my <a href="index.html">Audiosurf 2 scripting library</a>.</p>
<h1 id="contents">Contents</h1>
<script type="text/javascript">writeNavigation();</script>




<h1 id="vec3">vec3</h1>
<p>Various helpers for working with 3D coordinates</p>
<pre class="NppLua"><span class="sc11">vec3</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
</span><span class="sc5">do</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.add</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.sub</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.mulSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.assign</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.copy</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.fromApi</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">a.x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a.y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a.z</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">math.min</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">math.max</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc2">-- returns 3 arrays of numbers: x, y, and z</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.transposeArray</span><span class="sc10">(</span><span class="sc11">vec3_array</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">z</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{},</span><span class="sc0"> </span><span class="sc10">{},</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc0">
		</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">1</span><span class="sc10">,#</span><span class="sc11">vec3_array</span><span class="sc0"> </span><span class="sc5">do</span><span class="sc0">
			</span><span class="sc11">v</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">vec3_array</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0">
			</span><span class="sc11">x</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">z</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0">
		</span><span class="sc5">end</span><span class="sc0">
		</span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">z</span><span class="sc0">
	</span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.avg</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">math.sqrt</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">          </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.lenSquared</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.dist</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc10">((</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">])^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">])^</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">vec3.divSingle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">vec3.len</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.norm</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.setLen</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec3.neg</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">          </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
</span><span class="sc5">end</span></pre>




<h1 id="vec2">vec2</h1>
<p>Various helpers for working with 2D coordinates</p>
<pre class="NppLua"><span class="sc11">vec2</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
</span><span class="sc5">do</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.add</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.sub</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.mulSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">*</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.assign</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.copy</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.fromApi</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc11">a.x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">a.y</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">math.min</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">math.max</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">min</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]),</span><span class="sc0"> </span><span class="sc14">max</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc2">-- returns 2 arrays of numbers: x and y</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.transposeArray</span><span class="sc10">(</span><span class="sc11">vec2_array</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{},</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc0">
		</span><span class="sc5">for</span><span class="sc0"> </span><span class="sc11">i</span><span class="sc10">=</span><span class="sc4">1</span><span class="sc10">,#</span><span class="sc11">vec2_array</span><span class="sc0"> </span><span class="sc5">do</span><span class="sc0">
			</span><span class="sc11">v</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">vec2_array</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0">
			</span><span class="sc11">x</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc10">[</span><span class="sc11">i</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">v</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0">
		</span><span class="sc5">end</span><span class="sc0">
		</span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">x</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">y</span><span class="sc0">
	</span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.avg</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">       </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc4">2</span><span class="sc10">}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">math.sqrt</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">          </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.lenSquared</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">   </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.dist</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">      </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc14">sqrt</span><span class="sc10">((</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">])^</span><span class="sc4">2</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">])^</span><span class="sc4">2</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">vec2.divSingle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">vec2.len</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.norm</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">))</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.setLen</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0">    </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">divSingle</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">len</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc10">/</span><span class="sc0"> </span><span class="sc11">b</span><span class="sc10">)</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.right</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">        </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.left</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">         </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.neg</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">)</span><span class="sc0">          </span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]}</span><span class="sc0"> </span><span class="sc5">end</span><span class="sc0">

	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc14">sin</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">cos</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">math.sin</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc14">math.cos</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.getRotMatrix</span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">s</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">c</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc14">sin</span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">),</span><span class="sc0"> </span><span class="sc14">cos</span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0">
		</span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">],</span><span class="sc0"> </span><span class="sc11">dest</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">]</span><span class="sc0">
		</span><span class="sc10">=</span><span class="sc0">
		</span><span class="sc11">c</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc10">-</span><span class="sc11">s</span><span class="sc10">,</span><span class="sc0">
		</span><span class="sc11">s</span><span class="sc10">,</span><span class="sc0">  </span><span class="sc11">c</span><span class="sc0">
	</span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.mulMatrix</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">return</span><span class="sc0"> </span><span class="sc10">{</span><span class="sc0">
			</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]*</span><span class="sc11">m</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]*</span><span class="sc11">m</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">],</span><span class="sc0">
			</span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">1</span><span class="sc10">]*</span><span class="sc11">m</span><span class="sc10">[</span><span class="sc4">3</span><span class="sc10">]</span><span class="sc0"> </span><span class="sc10">+</span><span class="sc0"> </span><span class="sc11">a</span><span class="sc10">[</span><span class="sc4">2</span><span class="sc10">]*</span><span class="sc11">m</span><span class="sc10">[</span><span class="sc4">4</span><span class="sc10">],</span><span class="sc0">
		</span><span class="sc10">}</span><span class="sc0">
	</span><span class="sc5">end</span><span class="sc0">
	</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">getRotMatrix</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">mulMatrix</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc11">vec2.getRotMatrix</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">vec2.mulMatrix</span><span class="sc0">
	</span><span class="sc5">function</span><span class="sc0"> </span><span class="sc11">vec2.rot</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">angle</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">local</span><span class="sc0"> </span><span class="sc11">m</span><span class="sc0"> </span><span class="sc10">=</span><span class="sc0"> </span><span class="sc10">{}</span><span class="sc0">
		</span><span class="sc11">getRotMatrix</span><span class="sc10">(</span><span class="sc11">angle</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m</span><span class="sc10">)</span><span class="sc0">
		</span><span class="sc5">return</span><span class="sc0"> </span><span class="sc11">mulMatrix</span><span class="sc10">(</span><span class="sc11">a</span><span class="sc10">,</span><span class="sc0"> </span><span class="sc11">m</span><span class="sc10">)</span><span class="sc0">
	</span><span class="sc5">end</span><span class="sc0">
</span><span class="sc5">end</span></pre>
</body>
</html>